{"version":3,"sources":["webpack:///./src/pages/moonwalker/Jackson.js"],"names":["__webpack_require__","r","__webpack_exports__","d","Jackson","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","leftLegStages","rightLegStages","duckLeftLegStages","duckRightLegStages","animationTimingFunc","_useState","useState","rightOffset","setRightOffset","_useState2","rightPos","setRightPos","_useState3","index","setIndex","_useState4","animStage","setAnimStage","_useState5","animFunc","setAnimFunc","_useState6","danceMode","setDanceMode","_useState7","on","setOn","_useState8","delay","setDelay","_useState9","animDur","setAnimDur","jackson","useCallback","node","getBoundingClientRect","right","useEffect","callback","savedCallback","useRef","current","id","setInterval","clearInterval","useInterval","leftLeg","document","getElementById","rightLeg","nextLeftLegStage","nextRightLegStage","slice","call","children","forEach","child","classList","remove","add","a","createElement","className","ref","style","transition","transform","display","justifyContent","alignItems","fontSize","background","padding","fontWeight","color","onClick","type","value","onChange","e","target","height"],"mappings":"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","file":"component---src-pages-moonwalker-jackson-js-3576492258890dd81b41.js","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport './Jackson.css';\n// the original duck walk https://www.youtube.com/watch?v=EqS76TFCCYs\n\n// useInterval\n// copied wholesale from https://overreacted.io/making-setinterval-declarative-with-react-hooks/\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      !!savedCallback.current && savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default function Jackson() {\n  const leftLegStages = [\"stage-1\", \"stage-2\", \"stage-3\", \"stage-2\"];\n  const rightLegStages = [\"stage-3\", \"stage-2\", \"stage-1\", \"stage-2\"];\n  const duckLeftLegStages = [\"stage-4\", \"stage-6\", \"stage-4\", \"stage-6\"];\n  const duckRightLegStages = [\"stage-5\", \"stage-7\", \"stage-5\", \"stage-7\"];\n  const animationTimingFunc = [\"cubic-bezier(.87,.57,1,.68)\", \"cubic-bezier(0,.06,0,1.16)\", \"cubic-bezier(.87,.57,1,.68)\", \"cubic-bezier(0,.06,0,1.16)\"];\n  /* animations\n  0: ease in\n  1: ease out\n  2: ease in\n  3: ease out\n  */\n  const NUM_MOVES = 4;\n  const DUCK_WALK_MODE = 1;\n  const MOON_WALK_MODE = 0;\n  /* states */\n  const [rightOffset, setRightOffset] = useState(0);\n  const [rightPos, setRightPos] = useState(0);\n  const [index, setIndex] = useState(1);\n  const [animStage, setAnimStage] = useState(0);\n  const [animFunc, setAnimFunc] = useState(\"\");\n  const [danceMode, setDanceMode] = useState(MOON_WALK_MODE); /* 0: moon walk, 1: duck walk */\n  const [on, setOn] = useState(false);\n  const [delay, setDelay] = useState(700);\n  const [animDur, setAnimDur] = useState(0.7);\n\n  const jackson = useCallback(node => {\n    if(node !== null) {\n      setRightPos(node.getBoundingClientRect().right);\n    }\n  });\n  // the use states\n  const changeDelay = e => setDelay(e.target.value);\n  const toggleDance = () => setDanceMode(danceMode ^ 1);\n  const moonWalks = () => setRightOffset(rightOffset + 60);\n  const duckWalks = () => setRightOffset(rightOffset + 60);\n  const moveJacksonToEdge = () => setRightOffset(0);\n  const toggleOn = () => setOn(!on);\n\n  const isJacksonOutOfStage = () => rightPos <= 0;\n\n  // use effects\n  useEffect(() => {\n    setAnimFunc(animationTimingFunc[animStage]);\n  },[animStage, animationTimingFunc]);\n  useEffect(() => {\n    if(isJacksonOutOfStage()) {\n      setAnimDur(0);\n      moveJacksonToEdge();\n    }\n  });\n\n  // advance to the next step of the dance\n  var moveOneIndex = () => {\n    setAnimDur(0.7);\n    var leftLeg = document.getElementById('left-leg');\n    var rightLeg = document.getElementById('right-leg');\n    if(danceMode === MOON_WALK_MODE) {\n      var nextLeftLegStage = leftLegStages[index];\n      var nextRightLegStage = rightLegStages[index];\n      [].slice.call(leftLeg.children).forEach(function(child) {\n        child.classList.remove('stage-1');\n        child.classList.remove('stage-2');\n        child.classList.remove('stage-3');\n        child.classList.remove('stage-4');\n        child.classList.remove('stage-6');\n        child.classList.add(nextLeftLegStage);\n      });\n      [].slice.call(rightLeg.children).forEach(function(child) {\n        child.classList.remove('stage-1');\n        child.classList.remove('stage-2');\n        child.classList.remove('stage-3');\n        child.classList.remove('stage-5');\n        child.classList.remove('stage-7');\n        child.classList.add(nextRightLegStage);\n      });\n      moonWalks();\n    } else if(danceMode === DUCK_WALK_MODE) {\n      nextLeftLegStage = duckLeftLegStages[index];\n      nextRightLegStage = duckRightLegStages[index];\n      [].slice.call(leftLeg.children).forEach(function(child) {\n        child.classList.remove('stage-1');\n        child.classList.remove('stage-2');\n        child.classList.remove('stage-3');\n        child.classList.remove('stage-4');\n        child.classList.remove('stage-6');\n        child.classList.add(nextLeftLegStage);\n      });\n      [].slice.call(rightLeg.children).forEach(function(child) {\n        child.classList.remove('stage-1');\n        child.classList.remove('stage-2');\n        child.classList.remove('stage-3');\n        child.classList.remove('stage-5');\n        child.classList.remove('stage-7');\n        child.classList.add(nextRightLegStage);\n      });\n      duckWalks();\n    }\n    setIndex((index + 1)%NUM_MOVES);\n    setAnimStage((animStage + 1)%NUM_MOVES);\n  };\n  useInterval(moveOneIndex, on ? delay: null); /* <-- This is the main call that kicks off the dancing */\n  return (\n    <div className=\"playground-moonwalk\">\n      <div className=\"ceiling\"></div>\n      <div className=\"dancer-space\">\n        <div className=\"micheal-jackson\" id=\"micheal-jackson\" ref={jackson} style={{right:rightOffset, transition: `right ${animDur}s ${animFunc}`, transform:`${danceMode === DUCK_WALK_MODE ? 'scale(-1,1)' : ''}`}}>\n          <div className=\"head\">\n            <div className=\"hat\">\n              <div className=\"hat-top\"></div>\n              <div className=\"hat-bottom\"></div>\n            </div>\n            <div className=\"face\"></div>\n          </div>\n          <div className=\"body\">\n            <div className=\"left-arm\"></div>\n            <div className=\"right-arm\"></div>\n          </div>\n          <div className=\"legs\">\n            <div className=\"left-leg\" id=\"left-leg\">\n              <div className=\"left-leg-upper leg-upper  stage-1\" id=\"left-leg-upper\"></div>\n              <div className=\"left-leg-lower leg-lower stage-1\" id=\"left-leg-lower\"></div>\n              <div className=\"left-foot foot stage-1\" id=\"left-foot\"></div>\n            </div>\n            <div className=\"right-leg\" id=\"right-leg\">\n              <div className=\"right-leg-upper leg-upper stage-3\" id=\"right-leg-upper\"></div>\n              <div className=\"right-leg-lower leg-lower stage-3\" id=\"right-leg-lower\"></div>\n              <div className=\"right-foot foot stage-3\" id=\"right-foot\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"stage\">\n        <div style={{display: 'flex', justifyContent: 'space-around'}}>\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', fontSize: 'larger', background: 'white', padding: '0 20px', fontWeight: '700', color: on ? 'red' : 'green'}} onClick={toggleOn}>{on ? 'STOP' : 'START'}</div>\n          <form><input type=\"number\" value={delay} onChange={changeDelay} style={{height:\"100px\", fontSize:\"30px\"}}/></form>\n          <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', fontSize: 'larger', background: 'white', padding: '0 20px', fontWeight: '700'}} onClick={toggleDance}>{danceMode === MOON_WALK_MODE ? 'Moon walk' : 'Duck walk'}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}